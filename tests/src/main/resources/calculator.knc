// File: calculator.knc
// Author: Kanonic
// Description: Example Kanonic file

/**
 * CONFIG
 * name: symbol representing grammar name
 * root: symbol of root rule
 * package: string of target package name
 **/
kanonic : {
  name: calculator;
  root: root;
  package: "io.johnedquinn.kanonic.tests.calculator";
};

/** TOKENS **/

INTEGER: "[0-9]+";
PLUS: "\+";
MINUS: "-";
ASTERISK: "\*";
SLASH_FORWARD: "/";
WS: "[\s]" --> hidden;

/** RULES **/

root
    : expr
    ;

expr
  : expr PLUS math_op --> expr_plus
  | expr MINUS math_op --> expr_minus
  | math_op --> expr_atomic
  ;

math_op
    : math_op SLASH_FORWARD atomic --> expr_div
    | math_op ASTERISK atomic      --> expr_mult
    | atomic                       --> expr_atom
    ;

atomic
  : INTEGER --> int
  ;
